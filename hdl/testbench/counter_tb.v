// Testbench for counter module
// Generated by Claude

`timescale 1ns/1ps

module counter_tb;

    // Clock and reset
    reg clk;
    reg rst_n;
    reg enable;
    wire [7:0] count;

    // Instantiate the counter
    counter dut (
        .clk(clk),
        .rst_n(rst_n),
        .enable(enable),
        .count(count)
    );

    // Clock generation (10ns period = 100MHz)
    initial begin
        clk = 0;
        forever #5 clk = ~clk;
    end

    // Test sequence
    initial begin
        $display("=== Counter Testbench Start ===");
        $display("Time\t\tRst\tEnable\tCount");
        $monitor("%0t\t\t%b\t%b\t%d", $time, rst_n, enable, count);

        // Initialize
        rst_n = 0;
        enable = 0;
        #20;

        // Release reset
        rst_n = 1;
        #10;

        // Enable counter
        enable = 1;
        #200;  // Count for 20 clock cycles

        // Disable counter
        enable = 0;
        #50;

        // Re-enable counter
        enable = 1;
        #100;

        // Reset during counting
        #20;
        rst_n = 0;
        #20;
        rst_n = 1;
        #100;

        // Test completion
        $display("=== Counter Testbench Complete ===");
        $display("Final count: %d", count);

        // Check if counter worked correctly
        if (count > 0) begin
            $display("TEST_RESULT: PASS - Counter is functioning (final count: %d)", count);
        end else begin
            $display("TEST_RESULT: FAIL - Counter did not increment");
        end

        $finish;
    end

    // Watchdog timer
    initial begin
        #10000;
        $display("ERROR: Testbench timeout!");
        $finish;
    end

endmodule
